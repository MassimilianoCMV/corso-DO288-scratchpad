# I wish I could use Data Classes (Python >= 3.7),
# but we still have to support Python 3.6
# I also think there's a polyfill out there...


from datetime import timedelta


class TelemetryReport:

    sku: str
    action: str
    duration: timedelta
    sysinfo: dict

    def __init__(self, sku, action, duration, sysinfo):
        self.sku = sku
        self.action = action
        self.duration = duration
        self.sysinfo = sysinfo

    def __str__(self):
        return (
            "TELEMETRY "
            f"| {self.sku} "
            f"| {self.action} "
            f"| {self.duration.total_seconds()}s"
        )

    def to_dict(self):
        return {
            **self.__dict__,
            "duration": self.duration.total_seconds()
        }
